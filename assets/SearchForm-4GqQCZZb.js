import{d as I,e as _,C as E,o as r,c as y,i as t,h as k,a as s,t as G,s as x,_ as T,u as U,k as W,r as g,O as z,f as p,w as n,n as P,G as R,V as q,g as F,m as w,T as $,q as H,W as Y}from"./index-O6SYDmnG.js";import{M as j}from"./MovieCardList-BiJgtEFb.js";import{M as J}from"./MovieDetail-D1QUZhSQ.js";import{A as O,s as K}from"./vue-focus-lock-DikxaobS.js";import{A as Q}from"./AppSlider-CgugBh5f.js";const X={class:"search-card__img-wrapper"},Z={key:0},ee=["src","alt"],ae={class:"search-card__title"},se=I({__name:"SearchCard",props:{movie:{},appearance:{default:"slider-card"}},emits:["close"],setup(S,{emit:M}){const f=S,c=M,d=_(()=>({"search-card--card":f.appearance==="card","search-card--slider-card":f.appearance==="slider-card"}));return(a,o)=>{const i=E("router-link");return r(),y("div",{class:x(["search-card",d.value])},[t("div",X,[a.movie.posterUrl?(r(),y("picture",Z,[t("img",{class:"search-card__img",src:a.movie.posterUrl,alt:a.movie.title||""},null,8,ee)])):k("",!0)]),s(J,{class:"search-card__detail",rating:a.movie.tmdbRating,year:a.movie.releaseYear,genres:a.movie.genres,duration:a.movie.runtime,"small-size":!0},null,8,["rating","year","genres","duration"]),t("h2",ae,G(a.movie.title),1),s(i,{class:"search-card__link",to:{name:"MovieDetailPage",params:{id:a.movie.id}},onClick:o[0]||(o[0]=h=>c("close"))},null,8,["to"])],2)}}}),D=T(se,[["__scopeId","data-v-4b3d140a"]]),oe={class:"search-box"},re=I({__name:"SearchForm",props:{isMobileFormOpened:{type:Boolean}},emits:["toggleForm"],setup(S,{emit:M}){const f=S,c=M,d=U(),a=W(),o=g(""),i=g(!1),h=g(!1),b=g(!1),u=_(()=>a.isMobileScreenWidth),C=_(()=>d.movies),V=_(()=>i.value&&!u.value),A=_(()=>f.isMobileFormOpened&&h.value);async function B(){o.value&&(i.value=!1,h.value=!1,b.value=!1,await d.fetchGetMovies({title:o.value,count:Y}),C.value.length?m(!0):b.value=!0)}function m(v){i.value=v,h.value=v,o.value="",v?c("toggleForm",!0):(b.value=!1,c("toggleForm",!1))}return(v,e)=>{const L=z("focus");return r(),p(F(K),{disabled:!v.isMobileFormOpened},{default:n(()=>[s(O,{disabled:!u.value,type:"search",onClose:e[5]||(e[5]=l=>m(!1))},{default:n(()=>[t("div",oe,[t("form",{class:"search-box__form",onSubmit:P(B,["prevent"])},[R(t("input",{class:"search-box__input",placeholder:"search","onUpdate:modelValue":e[0]||(e[0]=l=>o.value=l)},null,512),[[q,o.value,void 0,{trim:!0}],[L]]),t("button",{class:x(["search-box__btn search-box__btn--search",{"search-box__btn--rotate":F(d).isMoviesLoading}]),type:"submit","aria-label":"search",tabindex:"-1"},[s(w,{"icon-name":"IconSearch"})],2),t("button",{class:"search-box__btn search-box__btn--close",type:"button","aria-label":"close form",onClick:e[1]||(e[1]=()=>m(!1))},[s(w,{"icon-name":"IconClose"})])],32),s($,{name:"fade"},{default:n(()=>[V.value?(r(),p(j,{key:0,class:"search-box__search-list",movies:C.value,appearance:"search-cards"},{default:n(({movie:l})=>[s(D,{appearance:"card",movie:l,onClose:e[2]||(e[2]=N=>m(!1))},null,8,["movie"])]),_:1},8,["movies"])):A.value?(r(),p(Q,{key:1,class:"search-box__slider",appearance:"search-card","space-between":16,movies:C.value},{default:n(({movie:l})=>[s(D,{movie:l,onClose:e[3]||(e[3]=N=>c("toggleForm",!1))},null,8,["movie"])]),_:1},8,["movies"])):b.value?(r(),y("p",{key:2,class:x(["search-box__no-result",{"search-box__search-list":!u.value,"search-box__slider":u.value}])}," No results found. Please try a different search term. ",2)):k("",!0)]),_:1}),(r(),p(H,{to:"body"},[s($,{name:"fade"},{default:n(()=>[i.value&&!u.value?(r(),p(O,{key:0,"is-header-visible":!0,color:"light",onClose:e[4]||(e[4]=l=>m(!1))})):k("",!0)]),_:1})]))])]),_:1},8,["disabled"])]),_:1},8,["disabled"])}}}),de=T(re,[["__scopeId","data-v-988d7fdb"]]);export{de as default};
